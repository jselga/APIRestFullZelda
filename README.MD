# Zelda BOTW API (Materials i Monstres)

Aquest projecte proporciona una API RESTful per consultar i gestionar informaciÃ³ de **materials** i **monstres** del joc *The Legend of Zelda: Breath of the Wild*, amb dades traduÃ¯des al castellÃ .

---

## ğŸ“ Contingut
- [Zelda BOTW API (Materials i Monstres)](#zelda-botw-api-materials-i-monstres)
  - [ğŸ“ Contingut](#-contingut)
  - [âœ¨ CaracterÃ­stiques](#-caracterÃ­stiques)
  - [ğŸ³ InstalÂ·laciÃ³ amb Docker](#-installaciÃ³-amb-docker)
    - [ğŸ”§ Requisits](#-requisits)
    - [ğŸ“– Instruccions](#-instruccions)
  - [ğŸ’» InstalÂ·laciÃ³ en local](#-installaciÃ³-en-local)
    - [ğŸ”§ Requisits](#-requisits-1)
    - [ğŸ“– Instruccions](#-instruccions-1)
  - [ğŸ§  GestiÃ³ del backup i persistÃ¨ncia de dades](#-gestiÃ³-del-backup-i-persistÃ¨ncia-de-dades)
    - [ğŸ’¾ Si vols **conservar els canvis** a la base de dades](#-si-vols-conservar-els-canvis-a-la-base-de-dades)
    - [ğŸ§¨ Si vols **restaurar el backup original**](#-si-vols-restaurar-el-backup-original)
    - [ğŸ“¤ Si vols **exportar i conservar una cÃ²pia del teu estat actual**](#-si-vols-exportar-i-conservar-una-cÃ²pia-del-teu-estat-actual)
  - [ğŸ“ Notes](#-notes)

## âœ¨ CaracterÃ­stiques
- Dades emmagatzemades a MongoDB
- CRUD complet per materials i monstres
- Backend amb Node.js + Express
- Suport per WebSockets (prÃ²ximament)
- TraduÃ¯t al castellÃ 

---

## ğŸ³ InstalÂ·laciÃ³ amb Docker

### ğŸ”§ Requisits
- [Docker](https://www.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

### ğŸ“– Instruccions

1. Clona el repositori:
   ```bash
   git clone https://github.com/el-teu-usuari/zelda-botw-api.git
   cd zelda-botw-api
   ```
2. Executa docker compose: 
    ```bash 
    docker compose up --build
    ```
    *El modificador --build nomÃ©s cal quan hi hagi canvis en el codi
3. Lâ€™API estarÃ  disponible a http://localhost:3001
4. Si tens problemes amb l'execuciÃ³ de docker pot ser que tinguis el port ocupat, assegura't que no tens una altra instancia del projecte funcionant amb 
    ```bash 
    docker ps
    ```
5. Atura els contenidors corresponents amb 
    ```bash
    docker stop <nomdelcontenidor> 
    ```
6. Revisa el fitxer .env per evitar conflictes de ports
   ```bash
   API_EXT_PORT=3001
   MONGO_EXT_PORT=27018
   ```
7. Quan no estiguis treballant amb l'API recorda aturar-ho tot fent:
    ```bash
    docker compose stop
    ```
8. Comprova si hi ha canvis al repositori:
    ```bash
    git pull origin master
    ```
9. Si vols restablir la base de dades amb la cÃ²pia de seguretat i assegurar-te que el codi estÃ  actualitzat:
    ```bash
    docker compose down --volumes
    docker compose up --build
    ```
    [ğŸ§  MÃ©s detalls tÃ¨cnics](#mÃ©s-detalls-tÃ¨cnics)
## ğŸ’» InstalÂ·laciÃ³ en local
### ğŸ”§ Requisits
- [Mongo](https://www.mongodb.com/docs/manual/administration/install-on-linux/)
- [Node.js v20+](https://nodejs.org/en/download)
### ğŸ“– Instruccions
1. Asseguraâ€™t que el servei de MongoDB estÃ  actiu:
   ```bash
   sudo systemctl start mongod
   ```
2. Executa la restauraciÃ³ de la base de dades:
   ```bash
   mongorestore --db zelda_botw ./backup/zelda_botw
   ```
3. InstalÂ·la les dependÃ¨ncies de node:
   ```bash
   npm install
   ```
4. Revisa el fitxer .env perque no hi hagi ports que puguin estar ocupats
   ```bash
   API_PORT=3001
   MONGO_URL=mongodb://localhost:27017/zelda_botw
   ```
5. Executa l'aplicaciÃ³:
   ```bash
   npm start
   ```
---   

## ğŸ§  GestiÃ³ del backup i persistÃ¨ncia de dades

### ğŸ’¾ Si vols **conservar els canvis** a la base de dades

Els canvis es desen automÃ ticament dins del volum `mongo_data`.  
AixÃ² passa **sempre que no eliminis el volum**:

```bash
docker compose down         # âœ”ï¸ MantÃ© les dades
docker compose stop         # âœ”ï¸ MantÃ© les dades
```

> â— No executis `--volumes` si vols conservar les dades.

---

### ğŸ§¨ Si vols **restaurar el backup original**

Aquesta opciÃ³ esborra les dades actuals i restaura la base de dades des del backup inclÃ²s al projecte:

```bash
docker compose down --volumes
docker compose up --build
```

El sistema detectarÃ  que no existeix cap restauraciÃ³ i farÃ  el `mongorestore` automÃ ticament.

---

### ğŸ“¤ Si vols **exportar i conservar una cÃ²pia del teu estat actual**

1. Fes un `dump` des del contenidor:
   ```bash
   docker exec -t <nom_contenidor_mongo> mongodump --db=zelda_botw --out=/backup-temp
   ```

2. Copiaâ€™l al teu sistema:
   ```bash
   docker cp <nom_contenidor_mongo>:/backup-temp ./backup
   ```

3. La carpeta `./backup/zelda_botw` contindrÃ  ara una cÃ²pia actualitzada del teu estat.

---
## ğŸ“ Notes   
- Pots fer servir Swagger (http://localhost:3001/api-docs) per explorar i provar els endpoints.
- Les dades de materials i monstres estan basades en lâ€™API original: https://botw-compendium.herokuapp.com
---   


